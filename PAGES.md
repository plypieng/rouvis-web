# Rouvis Web App – Canonical Page Specification (Next.js App Router + next-intl)

## Introduction

Rouvis is a farmer‑first assistant for Niigata growers. The UX is guided by three principles:
- Mobile‑first: on phones, prioritize quick scanning and large tap targets. The primary navigation lives in a bottom bar with four entries labeled in Japanese: 今日 (Today), 今週 (This Week), 記録 (Records), 知識 (Knowledge).
- Simplified essential pages: reduce cognitive load to a concise set of purposeful screens that cover the daily and weekly jobs to be done.
- Context‑aware chat: chat is the primary, central interface, aware of today’s tasks, weather, fields, and farmer preferences. It must be reachable from all core pages.

This document defines the application shell and each core page at the level needed for implementation and verification. It aligns with the current Next.js App Router architecture, next‑intl localization, localized routing segment, and the shared components present in the codebase, including [Header](web/components/Header.tsx:1), [BottomNav](web/components/BottomNav.tsx:1), and [Footer](web/components/Footer.tsx:1). It references design and intent from the plan, development plan, and the farmer UX vision.

---

## Application Shell

### Architecture Overview

- Framework: Next.js (App Router) with TypeScript.
- i18n: next‑intl, loading messages via [i18n.ts](web/i18n.ts:1) and request config [i18n/request.ts](web/i18n/request.ts:1); locale type in [i18n/config.ts](web/i18n/config.ts:1).
- Localized routing segment: all feature pages live beneath /[locale], with static params generated by [generateStaticParams()](web/app/%5Blocale%5D/layout.tsx:13).
- Layouts:
  - Root (document head and theme bootstrap): [app/layout.tsx](web/app/layout.tsx:36).
  - Localized shell (Header, Footer, BottomNav, children): [app/[locale]/layout.tsx](web/app/%5Blocale%5D/layout.tsx:1).
- Shell components:
  - [Header](web/components/Header.tsx:1): sticky top header with logo/name, primary nav, a consolidated Settings menu (language + theme), and auth area.
  - [BottomNav](web/components/BottomNav.tsx:1): mobile bottom navigation (今日/今週/記録/知識).
  - [Footer](web/components/Footer.tsx:1): global footer with About / Explore / Help / More and legal links.

### Theme Handling and Dark‑Mode Bootstrap

- The theme preference persists in localStorage under the key "theme" and supports light, dark, and system modes.
- On the server document, [RootLayout](web/app/layout.tsx:36) injects an inline script that runs before hydration to set documentElement.classList 'dark' according to the saved preference or prefers‑color‑scheme:dark. This prevents FOUC (flash of incorrect theme).
- The header Settings menu updates theme at runtime and persists it.

### Internationalization Behavior and URL Structure

- Supported locales: ja (default), en. See [i18n/config.ts](web/i18n/config.ts:1) and [i18n.ts](web/i18n.ts:3).
- URLs follow /[locale]/… pattern, e.g., /ja/today and /en/today.
- The [LanguageSwitcher](web/components/LanguageSwitcher.tsx:1) updates the current route locale segment (e.g., /ja/calendar -> /en/calendar) and preserves the path.
- Messages are organized in the common namespace: [en/common.json](web/i18n/locales/en/common.json:1), [ja/common.json](web/i18n/locales/ja/common.json:1). Header/Footer message IDs exist (e.g., header.sign_in, header.theme_light). Page‑specific message IDs are proposed below.

### Shell Behavior Across Viewports

- Desktop (≥1024px): header visible and minimal; primary nav in header; BottomNav hidden.
- Tablet (768–1023px): header persists; BottomNav may be hidden or reduced (implementation‑specific; current pattern hides BottomNav).
- Mobile (≤767px): bottom nav visible with four entries; header remains but prioritizes Settings menu and hamburger for overflow.
- The chat panel remains reachable from all core pages (via nav or a “Ask AI” quick entry).

### Accessibility and Semantics

- Header uses role="banner" and provides a "Skip to content" link targeting #main-content.
- Navigation landmarks role="navigation" with aria‑labels (Primary, Footer).
- Buttons and menus have aria‑attributes (aria‑expanded, aria‑controls). Mobile panel traps focus and closes on Escape/outside click.
- Ensure 4.5:1 contrast for body text and 3:1 for large text in both light and dark modes.

---

## Core Pages

Below, each page includes purpose, goals, routes, entry points, structure, key actions, components, data, states, a11y, l10n, responsive behavior, SEO, analytics, auth, edge cases, and microcopy in EN/JA. All pages reuse [Header](web/components/Header.tsx:1), [BottomNav](web/components/BottomNav.tsx:1) on mobile, and [Footer](web/components/Footer.tsx:1).

Legend: EN routes use /en/…; JA routes use /ja/…

### 1) Today

- Purpose: Single‑screen “What should I do today?” view with advisor context, tasks, weather/logistics, and central chat.
- Primary Goals/JTBD:
  - See critical alerts (e.g., frost).
  - Review and update today’s tasks quickly.
  - Ask context‑aware questions and log activities.
- Routes:
  - EN: /en/today (maps to current [TodayPage](web/app/%5Blocale%5D/page.tsx:1), which acts as “Today”)
  - JA: /ja/today (alias to localized root for clarity; current implementation is /[locale] root)
- Entry Points:
  - BottomNav: 今日
  - Cross‑flows: from tasks to Records; from Today to This Week; chat CTA opens [RouvisChatKit](web/components/RouvisChatKit.tsx:1).
- Information Architecture:
  - Advisor strip: [AdvisorStrip](web/components/AdvisorStrip.tsx:1)
  - Flow pillars: [TodayTasksCard](web/components/TodayTasksCard.tsx:1), [QuickActionButtons](web/components/QuickActionButtons.tsx:1)
  - Conversation: [RouvisChatKit](web/components/RouvisChatKit.tsx:1)
  - Insights: [InsightsStack](web/components/InsightsStack.tsx:1)
  - Trust/Evidence: [TrustEvidenceRail](web/components/TrustEvidenceRail.tsx:1), [EvidenceCard](web/components/EvidenceCard.tsx:1), [RAGContextBadge](web/components/RAGContextBadge.tsx:1)
- Key Actions:
  - Toggle task completion; regenerate today plan; log activities (quick actions); open chat with suggested prompts.
- Component Composition:
  - Reuse shared shell; page uses components listed in IA.
- Data Dependencies:
  - GET /v1/weather/alerts, /v1/analytics/overview, /v1/tasks?date=today, /v1/weather/forecast, /v1/logistics/stream (SSE), /v1/cooperative/announcements (SSE).
- States:
  - Loading skeletons for tasks and forecast; empty lists; error banners; “offline” ribbon with retry.
- Accessibility:
  - Advisor strip role="region" aria‑live="polite"; task list aria‑live="polite"; keyboard focus rings and ESC to close any popovers.
- Localization:
  - Use existing keys: today.tasks.*, today.prompts.*, insights.*, header.*. Add new keys (see New i18n Keys below).
- Responsive:
  - Mobile: stack vertically; BottomNav visible. Tablet: 2‑column; Desktop: 3‑column grid (4/4/4) ≥ 1280px.
- SEO/OG:
  - Title: “Today | Rouvis”; description: daily plan and advisor; OG image: logo or dashboard snapshot.
- Analytics:
  - Events: today_view, task_toggle, quick_action_click, chat_open, advisor_strip_view, alert_chip_click.
- Auth:
  - Read‑only for guests; editing tasks or logging activities prompts Sign in.
- Edge Cases:
  - No tasks; severe weather multiple alerts; API timeouts; partial SSE streams.

Microcopy examples (EN/JA) and IDs:
- pages.today.title: “Today” / “今日”
- pages.today.advisor.title: “Now’s Advice” / “今のアドバイス”
- pages.today.tasks.title: reuse today.tasks.title
- pages.today.empty: “No tasks for today yet” / “今日のタスクはまだありません”
- pages.today.cta.regenerate: reuse today.tasks.regenerate
- pages.today.cta.ask_ai: “Ask AI” / “AIに相談”

---

### 2) This Week

- Purpose: Plan and view weekly schedule; upcoming tasks and weather considerations.
- Goals/JTBD:
  - See and edit the week plan; avoid bad weather windows; coordinate work.
- Routes:
  - EN: /en/week (backed by weekly mode in [calendar page](web/app/%5Blocale%5D/calendar/page.tsx:1))
  - JA: /ja/week
  - Implementation: route may alias to /[locale]/calendar with “week” view param.
- Entry Points:
  - BottomNav: 今週; “View weekly plan” from Today tasks footer.
- IA:
  - Week header and filters; calendar grid (week); upcoming list; CTA to create/schedule.
- Actions:
  - Create/edit tasks; schedule by drag; open chat for planning.
- Components:
  - [CalendarView](web/components/CalendarView.tsx:1), [TaskSchedulerCard](web/components/TaskSchedulerCard.tsx:1), [ActivityTimeline](web/components/ActivityTimeline.tsx:1).
- Data:
  - GET /v1/tasks?range=week, optional POST/PATCH for scheduling.
- States:
  - Empty week; loading; conflicts warning; error; offline.
- A11y:
  - Calendar grid roles with keyboard navigation; ARIA labels for days.
- Localization:
  - Reuse calendar.*; add pages.week.* for title hints.
- Responsive:
  - Mobile: vertical list + compact week scroller. Desktop: full grid + side list.
- SEO:
  - Title: “This Week | Rouvis”.
- Analytics:
  - week_view, week_task_create, week_task_move, week_conflict_resolved.
- Auth:
  - Edits require Sign in.
- Edge:
  - Overlapping tasks; locale week start day differences.

Microcopy & IDs:
- pages.week.title: “This Week” / “今週”
- pages.week.empty: “No scheduled tasks this week” / “今週の予定はありません”
- pages.week.cta.add: “Add task” / “タスクを追加”

---

### 3) Records

- Purpose: Unified activity records (watering, fertilizing, harvesting, etc.) with create/view/edit flows.
- Goals/JTBD:
  - Capture and review farm activities; audit and analytics export.
- Routes:
  - EN: /en/records
  - JA: /ja/records
- Entry Points:
  - BottomNav: 記録; links from Today quick actions; from Knowledge recommended actions.
- IA:
  - Filters; activity list; detail drawer/modal; create/edit forms.
- Actions:
  - Create record; edit; delete; attach photos; share to chat context.
- Components:
  - [ActivityDashboard](web/components/ActivityDashboard.tsx:1), [ActivityFeedCard](web/components/ActivityFeedCard.tsx:1), [ActivityLogModal](web/components/ActivityLogModal.tsx:1).
- Data:
  - GET/POST/PATCH/DELETE /v1/activities.
- States:
  - Empty (no records), loading, error, offline, success toast.
- A11y:
  - Tables and lists with appropriate semantics; form labels; file input accessible.
- Localization:
  - New pages.records.* keys; reuse activity_types.*, fields.*.
- Responsive:
  - List on mobile; table/grid on desktop; sticky action bar on small view.
- SEO:
  - Title: “Records | Rouvis”.
- Analytics:
  - record_create, record_update, record_delete, records_filter.
- Auth:
  - Required for mutations. View may allow guest with limited scope.
- Edge:
  - Large uploads; partial failures; undo after success.

Microcopy & IDs:
- pages.records.title: “Records” / “記録”
- pages.records.empty: “No records yet” / “記録はまだありません”
- pages.records.cta.new: “New record” / “新規記録”

---

### 4) Knowledge

- Purpose: Searchable knowledge base of articles and tips (JA first).
- Goals/JTBD:
  - Quickly find procedures, seasonal guidance; link to actions or records.
- Routes:
  - EN: /en/knowledge (maps to [community](web/app/%5Blocale%5D/community/page.tsx:1))
  - JA: /ja/knowledge
- Entry:
  - BottomNav: 知識; link from chat citations [EvidenceCard](web/components/EvidenceCard.tsx:1).
- IA:
  - Search bar; featured; categories; article list; viewer.
- Actions:
  - Search; open article; “Apply this” to create task/record; open chat with context.
- Components:
  - [KnowledgeSearch](web/components/KnowledgeSearch.tsx:1), [ArticleList](web/components/ArticleList.tsx:1), [NaturalEvidenceCard](web/components/NaturalEvidenceCard.tsx:1).
- Data:
  - GET /v1/search, RAG context citations; external sources as available.
- States:
  - No results; loading; offline.
- A11y:
  - Semantic headings; search input labeled; result regions with aria‑live.
- Localization:
  - Propose pages.knowledge.* keys; reuse community.* for categories.
- Responsive:
  - 1‑column mobile; 2‑column desktop (filters + results).
- SEO:
  - Title: “Knowledge | Rouvis”; OG tags for article sharing.
- Analytics:
  - knowledge_search, knowledge_open, knowledge_apply.
- Auth:
  - Optional; some articles may require Sign in for deeper actions.
- Edge:
  - Long articles; external link availability.

Microcopy & IDs:
- pages.knowledge.title: “Knowledge” / “知識”
- pages.knowledge.empty: “No articles found” / “該当する記事は見つかりませんでした”

---

### 5) Settings

- Purpose: Central control of language and theme; future account preferences.
- Goals:
  - Choose language; set theme; confirm persistence and system mode.
- Routes:
  - EN: /en/settings
  - JA: /ja/settings
- Entry:
  - Header Settings menu; footer; profile/account areas.
- IA:
  - Language tiles; theme selection; saved state indicator.
- Actions:
  - Change language; change theme; reset to system.
- Components:
  - Reuse [LanguageSwitcher](web/components/LanguageSwitcher.tsx:1); theme controls as in [Header](web/components/Header.tsx:1).
- Data:
  - localStorage 'theme'; URL locale; cookies if added later.
- States:
  - Conflicts (system vs manual) explained; success toasts.
- A11y:
  - aria‑pressed for current option; clear focus; ESC to exit dialogs.
- Localization:
  - Reuse header.language, header.theme_*; add pages.settings.* for page title and hints.
- Responsive:
  - Single column on mobile; 2‑column layout on desktop.
- SEO:
  - “Settings | Rouvis”
- Analytics:
  - settings_open, settings_change_language, settings_change_theme.
- Auth:
  - Not required for global settings.
- Edge:
  - No localStorage; SSR hydration fallback to system.

Microcopy & IDs:
- pages.settings.title: “Settings” / “設定”
- pages.settings.desc: “Manage language and theme” / “言語とテーマを管理します”

---

### 6) Profile

- Purpose: Show and edit user profile fields.
- Routes:
  - EN: /en/profile
  - JA: /ja/profile
- Entry:
  - Header user menu (when logged in).
- IA:
  - Identity, contact, avatar upload.
- Actions:
  - Save / cancel; change avatar.
- Components:
  - Generic form controls; avatar uploader.
- Data:
  - GET/PATCH /v1/profile (future); mock until ready.
- States:
  - Empty; loading; error; success with toast.
- A11y:
  - Labels and descriptions; input errors announced.
- Localization:
  - New pages.profile.* keys.
- Responsive:
  - Single column; two columns desktop.
- SEO:
  - “Profile | Rouvis”
- Analytics:
  - profile_view, profile_update.
- Auth:
  - Required; redirect guests to Sign in.
- Edge:
  - Upload failures; partially complete profile.

Microcopy & IDs:
- pages.profile.title: “Profile” / “プロフィール”
- pages.profile.save: “Save changes” / “変更を保存”

---

### 7) Account

- Purpose: Account‑level settings (email, password, security).
- Routes:
  - EN: /en/account
  - JA: /ja/account
- Entry:
  - Header user menu.
- IA:
  - Credentials; security options.
- Actions:
  - Update email/password; 2FA (future).
- Data:
  - Future endpoints.
- States:
  - Loading; error; success; confirmations.
- A11y:
  - Proper form semantics; password visibility toggle announced.
- Localization:
  - pages.account.* keys.
- Responsive:
  - Same as Profile.
- SEO/Analytics/Auth/Edge:
  - Similar to Profile.

Microcopy & IDs:
- pages.account.title: “Account” / “アカウント”
- pages.account.save: “Save” / “保存”

---

### 8) Sign in

- Purpose: Authentication entry for existing users.
- Routes:
  - EN: /en/login or /en/signin
  - JA: /ja/login or /ja/signin
- Entry:
  - Header auth links; gated actions.
- IA:
  - Email/password; “Continue” primary.
- Actions:
  - Submit; forgot password; switch to Sign up.
- Data:
  - Auth API (future).
- States:
  - Loading; error; lockout; success redirect.
- A11y:
  - Label inputs and helper text; focus management after errors.
- Localization:
  - Reuse header.sign_in; new pages.auth.* keys.
- Responsive:
  - Centered card; minimal friction.
- SEO/Analytics/Auth/Edge:
  - auth_signin_start, auth_signin_success; redirect to last page.

Microcopy & IDs:
- pages.auth.signin.title: “Sign in” / “ログイン”
- pages.auth.signin.cta: “Continue” / “続ける”

---

### 9) Sign up

- Purpose: Account creation.
- Routes:
  - EN: /en/signup
  - JA: /ja/signup
- Entry:
  - Header auth links; “Create account” from Sign in.
- IA:
  - Email; password; accept terms; submit.
- Actions:
  - Create; email verify (future).
- Data:
  - Auth API (future).
- States:
  - Loading; invalid; success redirect.
- A11y:
  - Labels and error semantics.
- Localization:
  - Reuse header.sign_up; new pages.auth.signup.* keys.
- Responsive/SEO/Analytics/Auth/Edge:
  - Similar to Sign in.

Microcopy & IDs:
- pages.auth.signup.title: “Sign up” / “新規登録”
- pages.auth.signup.cta: “Create account” / “アカウントを作成”

---

## Cross‑Page Flows

1) From Today to task/record details
- Toggle or open a task from [TodayTasksCard](web/components/TodayTasksCard.tsx:1) -> open edit or view in Records (/[locale]/records?id=…).
- Advisor suggests an action -> create record with [TaskSchedulerCard](web/components/TaskSchedulerCard.tsx:1) or [ActivityLogModal](web/components/ActivityLogModal.tsx:1).

2) Records to create/view/edit
- From Records list -> New record flow; success surface a toast and optional “Share to chat”.

3) Invoke chat anywhere
- Header or page CTA opens [RouvisChatKit](web/components/RouvisChatKit.tsx:1); pass context (selected field/task/article).

4) Knowledge to actions
- From article -> “Apply this” -> new record or task; show confirmation card with [ActionConfirmationCard](web/components/ActionConfirmationCard.tsx:1).

5) Language and theme effects
- The header Settings menu changes locale (via [LanguageSwitcher](web/components/LanguageSwitcher.tsx:1)) and theme; theme persists via localStorage('theme'), set on server bootstrap by [RootLayout](web/app/layout.tsx:36). System mode updates on OS changes.

---

## New i18n Keys to Add (common namespace)

Add these to the common.json dictionaries alongside existing header/footer keys.

- pages.today.title: EN “Today”, JA “今日”
- pages.today.empty: EN “No tasks for today yet”, JA “今日のタスクはまだありません”
- pages.today.cta.ask_ai: EN “Ask AI”, JA “AIに相談”

- pages.week.title: EN “This Week”, JA “今週”
- pages.week.empty: EN “No scheduled tasks this week”, JA “今週の予定はありません”
- pages.week.cta.add: EN “Add task”, JA “タスクを追加”

- pages.records.title: EN “Records”, JA “記録”
- pages.records.empty: EN “No records yet”, JA “記録はまだありません”
- pages.records.cta.new: EN “New record”, JA “新規記録”

- pages.knowledge.title: EN “Knowledge”, JA “知識”
- pages.knowledge.empty: EN “No articles found”, JA “該当する記事は見つかりませんでした”

- pages.settings.title: EN “Settings”, JA “設定”
- pages.settings.desc: EN “Manage language and theme”, JA “言語とテーマを管理します”

- pages.profile.title: EN “Profile”, JA “プロフィール”
- pages.profile.save: EN “Save changes”, JA “変更を保存”

- pages.account.title: EN “Account”, JA “アカウント”
- pages.account.save: EN “Save”, JA “保存”

- pages.auth.signin.title: EN “Sign in”, JA “ログイン”
- pages.auth.signin.cta: EN “Continue”, JA “続ける”

- pages.auth.signup.title: EN “Sign up”, JA “新規登録”
- pages.auth.signup.cta: EN “Create account”, JA “アカウントを作成”

(These keys complement existing header.*, footer.*, today.*, insights.*, calendar.*, community.* entries.)

---

## Responsive Behavior

- Breakpoints (Tailwind defaults):
  - sm ≥ 640px, md ≥ 768px, lg ≥ 1024px, xl ≥ 1280px, 2xl ≥ 1536px.
- Today page: 1‑column mobile; 2‑column tablet; 3‑column desktop (12‑col grid 4/4/4 at ≥1280px).
- BottomNav visible on mobile; hidden on lg+; Header remains sticky with compact spacing on mobile.

---

## SEO and Open Graph

- Page metadata via Next.js metadata export or head tags. For each page:
  - Title, description, keywords (jp/en), og:title, og:description, og:image (logo or contextual).
- Localized alternates: link rel="alternate" hreflang for /ja and /en.
- Ensure structured data where applicable (articles).

---

## Analytics and Success Metrics

Track per page:
- view events (today_view, week_view, records_view, knowledge_view, settings_view, profile_view, account_view, auth_view)
- primary actions (task_toggle, record_create/update/delete, knowledge_search/open/apply, settings_change_language/theme, auth_signin/signup)
- outcome metrics: time‑to‑plan (today), tasks completed per day/week, records created per week, knowledge engagement.

---

## Authentication and Authorization

- Guest access: read‑only to Today, Knowledge; restricted actions prompt Sign in.
- Authenticated: full CRUD on records/tasks; profile/account access. Links exist in Header auth menu.
- Future: role‑based (e.g., cooperative admins).

---

## Notable Edge Cases

- API partial failures (weather loads, tasks fail); show independent loading/error UI.
- SSE stream interruptions (logistics/announcements); auto‑retry with backoff.
- Offline: show offline badge, cached content (when available), and queue writes (future).

---

## Acceptance Criteria and Checklists

Below: per‑page acceptance criteria followed by a compact QA checklist.

### Today – Acceptance

- Advisor strip shows live alert/KPI/next task; chat is central; tasks are actionable.
- Mobile layout stacks correctly; desktop is 3‑column.
- No missing translations; theme respects saved preference.
- Keyboard navigable; screen reader friendly.

Checklist
- [ ] i18n: all text via message IDs; EN/JA verified
- [ ] A11y: roles, aria‑live, focus ring, ESC closes menus/panels
- [ ] Responsive: mobile/desktop layouts correct
- [ ] Errors: API failures show non‑blocking errors
- [ ] Analytics: today_view, task_toggle, chat_open fired

### This Week – Acceptance

- Weekly grid with add/edit; scrollable list of upcoming items.
- Navigation from Today footer works; language/theme consistent.

Checklist
- [ ] i18n keys present (pages.week.*)
- [ ] Keyboard interaction for calendar grid
- [ ] Error and empty states render
- [ ] Analytics: week_view, task_create/move

### Records – Acceptance

- Filterable list; create/edit flows; activity details.
- Photos attach; “Share to chat” optional.

Checklist
- [ ] i18n keys pages.records.*
- [ ] Form labels and validation errors announced
- [ ] Loading/empty/error/undo UI validated
- [ ] Analytics: record create/update/delete events

### Knowledge – Acceptance

- Search returns localized results; article open; “Apply this” flow.
- Citations and chat integration available.

Checklist
- [ ] i18n pages.knowledge.*
- [ ] Search input labeled; results region aria‑live
- [ ] SEO og tags for articles
- [ ] Analytics: search/open/apply

### Settings – Acceptance

- Language and theme controls work; theme persists; system mode honored.

Checklist
- [ ] i18n pages.settings.*
- [ ] aria‑pressed on theme choice
- [ ] LocalStorage state writes; bootstrap script respected
- [ ] Analytics: settings_change_language/theme

### Profile – Acceptance

- Edit user details; success feedback; auth required.

Checklist
- [ ] i18n pages.profile.*
- [ ] Form a11y and validation
- [ ] Auth gate redirects guests
- [ ] Analytics: profile_update

### Account – Acceptance

- Update credential/security fields; auth required.

Checklist
- [ ] i18n pages.account.*
- [ ] Input masking and errors
- [ ] Analytics: account_update

### Sign in / Sign up – Acceptance

- Frictionless forms; error states; redirects on success.

Checklist
- [ ] i18n pages.auth.signin.* / pages.auth.signup.*
- [ ] Focus moves to error summary
- [ ] Analytics: auth_signin_start/success, auth_signup_start/success

---

## Appendix: Key Components and Files

- Shell and i18n
  - [Header](web/components/Header.tsx:1)
  - [BottomNav](web/components/BottomNav.tsx:1)
  - [Footer](web/components/Footer.tsx:1)
  - [Localized Layout](web/app/%5Blocale%5D/layout.tsx:1)
  - [Root Document Layout](web/app/layout.tsx:36)
  - [LanguageSwitcher](web/components/LanguageSwitcher.tsx:1)
  - [i18n.ts](web/i18n.ts:1), [i18n/config.ts](web/i18n/config.ts:1), [i18n/request.ts](web/i18n/request.ts:1)

- Today page building blocks
  - [TodayPage](web/app/%5Blocale%5D/page.tsx:1), [AdvisorStrip](web/components/AdvisorStrip.tsx:1), [TodayTasksCard](web/components/TodayTasksCard.tsx:1), [QuickActionButtons](web/components/QuickActionButtons.tsx:1)
  - [RouvisChatKit](web/components/RouvisChatKit.tsx:1), [InsightsStack](web/components/InsightsStack.tsx:1)
  - [TrustEvidenceRail](web/components/TrustEvidenceRail.tsx:1), [EvidenceCard](web/components/EvidenceCard.tsx:1), [RAGContextBadge](web/components/RAGContextBadge.tsx:1)
  - [WeatherForecast](web/components/WeatherForecast.tsx:1), [WeatherAlertBanner](web/components/WeatherAlertBanner.tsx:1)

- Records & Calendar
  - [ActivityDashboard](web/components/ActivityDashboard.tsx:1), [ActivityFeedCard](web/components/ActivityFeedCard.tsx:1), [ActivityTimeline](web/components/ActivityTimeline.tsx:1)
  - [CalendarView](web/components/CalendarView.tsx:1), [TaskSchedulerCard](web/components/TaskSchedulerCard.tsx:1)

This specification is canonical for the current Rouvis App Router implementation. Any divergence or proposed change should be reflected here to keep design and build aligned.